<side-menu></side-menu>
<ion-header (click)="toggleMenu()" [ngStyle]="{'background-color': primaryColor}">
  <button class="btn-menu" [ngStyle]="{'background-color': primaryColor}">
    <i class="icon icon-menu"></i>
  </button>
  <ion-title>
    {{title}}
  </ion-title>
</ion-header>

<ion-content padding [ngStyle]="{'background-color': secondaryColor}">
  <button ion-button round class="btn" [ngStyle]="{'background-color': '#747474'}" (click)="navigateToLancar()" style="margin-left: 2.5%;">Novo</button>
  <button ion-button round class="btn" [ngStyle]="{'background-color': buttonColor}" (click)="navigateToBuscar()" style="margin-left: 2.5%;">Buscar</button>

  <section class="charts-content chart-qualidade">
    <ion-list>
      <div style="margin:0 auto; background-color: #1E1E1E;"> <!-- #1B1B1B #747474 -->

        <div class="align-left">
          <ion-label style="font-size: 18px;font-weight: bold;">{{totalAvarias}}</ion-label>
          <ion-label style="font-size: 12px;font-weight: bold;">Total de</ion-label>
          <ion-label style="font-size: 12px;font-weight: bold;">Avarias</ion-label>
        </div>

        <div class="align-image-center">
          <img [src]="image">
        </div>

        <div class="align-right">
          <ion-label style="font-size: 18px;font-weight: bold;">{{porcentagemVeiculosAvariados | number }}%</ion-label>
          <ion-label style="font-size: 12px;font-weight: bold;">Veículos</ion-label>
          <ion-label style="font-size: 12px;font-weight: bold;">Avariados</ion-label>
        </div>

        <div style="padding-bottom: 6px;color: white; background-color: transparent;">
          <ion-slides pager="true" [options]="slideOpts" pager loop slidesPerView="3" style="padding-left: 20%;padding-right: 20%;" pager="{{false}}">
            <ion-slide style="display: inline;" *ngFor="let nivel of avarias['nivelAvarias']">
              <div style="padding: 0px 5px ;">
                <round-progress [current]="nivel['porcentagem'].toFixed(1)" [max]="100" [stroke]="15" [radius]="125" [semicircle]="true"
                  [responsive]="true" [clockwise]="true" [color]="'#FF0000'" [background]="'#eaeaea'"
                  [duration]="80" [animation]="'easeOutCubic'" [animationDelay]="0">
                </round-progress>
              </div>
              <div style="text-align: center; color: #fff;font-size: small;">{{nivel['porcentagem'].toFixed(1)}}</div>
              <div style="text-align: center; color: #fff;font-size: small;">{{nivel['nome']}}</div>
            </ion-slide>
          </ion-slides>
        </div>
        <ion-row>
          <ion-col>
          </ion-col>
        </ion-row>

      </div>
    </ion-list>
  </section>

  <section class="charts-content" [ngStyle]="{'background-color': primaryColor}">
    <ion-item-divider [ngStyle]="{'background-color': primaryColor}">
      <ion-label class="ion-label">
        Últimas Avarias Cadastradas
      </ion-label>
    </ion-item-divider>

    <ion-list style="padding-right: 3%;">
      <dashboard-accordion *ngFor="let item of itemsPage" style="font-size: 5px;background-color: #595959;" [navioNome]="item.modelo + ' - Chassi: ' + item.chassi">
        <ion-item no-lines>
          <ion-label>Tipo de Anomalia:</ion-label>
          <ion-input type="text"  placeholder="{{item.tipoAvaria}}" [disabled]="true"></ion-input>
        </ion-item>

        <ion-item no-lines>
          <ion-label>Parte Avariada:</ion-label>
          <ion-input type="text" placeholder="{{item.parteAvariada}}" [disabled]="true"></ion-input>
        </ion-item>

        <ion-item no-lines>
          <ion-label>Nível de Avaria:</ion-label>
          <ion-input type="text" placeholder="{{item.nivelGravidadeAvaria}}" [disabled]="true"></ion-input>
        </ion-item>

        <ion-item no-lines>
          <ion-label>Data:</ion-label>
          <ion-input type="text" placeholder="{{item.data | date: 'dd/MM/yyyy'}}" [disabled]="true"></ion-input>
        </ion-item>
      </dashboard-accordion>

      <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
        <ion-infinite-scroll-content
          loadingSpinner="bubbles"
          loadingText="Carregando...">
        </ion-infinite-scroll-content>
      </ion-infinite-scroll>

    </ion-list>
  </section>
</ion-content>

<ion-footer no-border [ngStyle]="{'background-color': primaryColor}">
  <ion-grid class="grid-botao-wrapper">
    <ion-row>
      <ion-col>
        <button ion-button round class="btn-receiving-long btn-cancel"(click)="Voltar()" type="button">Voltar</button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-footer>

<modal-error></modal-error>
<modal-loading></modal-loading>

